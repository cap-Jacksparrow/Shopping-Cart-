<div class="max-w-lg mx-auto my-12 bg-white p-8 rounded-lg shadow-lg">
  <h1 class="text-2xl font-bold mb-6 text-gray-800">Edit Product</h1>

  <form action="/admin/edit/{{products._id}}" method="post" enctype="multipart/form-data" class="space-y-5">
    
    <!-- Product Image -->
    <div class="text-center">
      <img src="{{products.image}}" alt="Product Image" id="viewimg" 
           class="mx-auto rounded-md border border-gray-300" 
           style="max-width: 200px; max-height: 200px;">
    </div>

    <!-- Change Image -->
    <div>
      <label for="image" class="block text-sm font-medium text-gray-700 mb-1">Change Image</label>
      <input type="text" id="image" name="image"  onChange="viewimage(event)" placeholder="paste image url"
             class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-600 file:text-white hover:file:bg-blue-700" />
    </div>

    <!-- Product Name -->
    <div>
      <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Product Name</label>
      <input type="text" id="name" name="name" value="{{products.name}}" required
             class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
    </div>

    <!-- Description -->
    <div>
      <label for="des" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
      <input type="text" id="des" name="des" value="{{products.des}}" required
             class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
    </div>

    <!-- Price -->
    <div>
      <label for="price" class="block text-sm font-medium text-gray-700 mb-1">Price (â‚¹)</label>
      <input type="number" id="price" name="price" value="{{products.price}}" min="0" step="0.01" required
             class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
    </div>

    <!-- Submit Button -->
    <button type="submit"
            class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors">
      Submit
    </button>
  </form>
</div>

<script>
  function viewimage(event){
    const img = document.getElementById('viewimg');
    img.src = event.target.value;
    img.onload = () => URL.revokeObjectURL(img.src); // Clean up memory
  }
</script>
